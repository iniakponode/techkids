{% extends 'layout/base.html' %}

{% block title %}TechKids | Home{% endblock %}

{% block content %}

<!-- =======================
     MAIN CAROUSEL
======================= -->
<div id="mainCarousel" class="carousel slide" data-bs-ride="carousel">
  <div class="carousel-inner">
    <!-- Slide 1 -->
    <div class="carousel-item active">
      <img src="/static/images/hero3.png" class="d-block w-100" alt="Hero 1" loading="lazy">
      <div class="carousel-caption position-absolute top-50 start-50 translate-middle text-center">
        <h2>Welcome to TechKids</h2>
        <p>Empowering the next generation with technology skills!</p>
        <a href="#courses" class="btn btn-primary mt-3 px-4 py-2">
            View Courses
          </a>
      </div>
    </div>

    <!-- Slide 2 -->
    <div class="carousel-item">
      <img src="/static/images/hero2.png" class="d-block w-100" alt="Hero 2" loading="lazy">
      <div class="carousel-caption position-absolute top-50 start-50 translate-middle text-center">
        <h2>Learn at Your Pace</h2>
        <p>Online and in-person courses for all ages.</p>
        <a href="#about" class="btn btn-primary mt-3 px-4 py-2">
            About Us
          </a>
      </div>
    </div>

    <!-- Slide 3 -->
    <div class="carousel-item position-relative">
      <div id="hero-bg"></div>
      <img src="/static/images/hero1.png" class="d-block w-100" alt="Hero 3" loading="lazy">
      <div class="carousel-caption position-absolute top-50 start-50 translate-middle text-center">
        <div class="overlay">
          <h2 class="fw-bold">Hands-On Experience</h2>
          <p class="opacity-75">Interactive projects that spark creativity.</p>
          <div class="d-flex justify-content-center gap-2 mt-3">
            <a href="#courses" class="btn btn-primary px-4">View Courses</a>
            <a href="#about" class="btn btn-outline-primary px-4">Learn More</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Carousel Controls -->
  <button class="carousel-control-prev" type="button" data-bs-target="#mainCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#mainCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>


<!-- =======================
     ABOUT US
======================= -->
{% if not (request.query_params.get('search') or request.query_params.get('category') or request.query_params.get('age') or request.query_params.get('price_min') or request.query_params.get('price_max')) %}
<section id="about" class="py-5 about-section fade-section">
  <div class="container">
    <div class="row align-items-center">
      <!-- Optional About Image -->
      <div class="col-md-6 mb-4 mb-md-0">
        <img
          src="/static/images/aboutusimg.png"
          alt="About TechKids"
          class="img-fluid rounded"
          loading="lazy"
        />
      </div>
      <div class="col-md-6 text-center text-md-start">
        <h2 class="mb-4">About Us</h2>
        <p class="lead">
          At <strong>TechKids</strong>, we inspire young minds to explore the world of technology.
        </p>
        <ul class="list-unstyled mb-3">
          <li class="mb-2"><i class="bi bi-lightbulb me-2"></i>Inspire creativity through fun projects</li>
          <li class="mb-2"><i class="bi bi-people me-2"></i>Guidance from expert mentors</li>
          <li class="mb-2"><i class="bi bi-code-slash me-2"></i>Hands-on coding workshops</li>
        </ul>
        <a href="/registration" class="btn btn-primary mt-3 start-learning-btn">Start Learning</a>
      </div>
    </div>
  </div>
</section>
{% endif %}

<!-- =======================
     HERO COURSE
======================= -->
{% if hero_course %}
<section class="container py-5 fade-section" id="hero-course">
  <div class="row align-items-center">
    <div class="col-md-6 mb-3 mb-md-0">
      <img src="{{ hero_course.image_url }}" class="img-fluid rounded" alt="{{ hero_course.title }}" loading="lazy">
    </div>
    <div class="col-md-6 text-center text-md-start">
      <h2 class="mb-3">{{ hero_course.title }}</h2>
      <div class="mb-3">
        <span class="badge bg-primary">{{ hero_course.age_group }}</span>
        <span class="badge bg-primary">{{ hero_course.duration }}</span>
        <span class="badge bg-primary">Live Projects</span>
      </div>
      <p class="mb-3">{{ hero_course.summary }}</p>
      <div class="d-grid gap-2 d-md-flex">
        <a href="/registration?course={{ hero_course.id }}" class="btn btn-primary me-md-2 flex-fill">Register Now</a>
        <a href="/courses/{{ hero_course.id }}" class="btn btn-outline-primary flex-fill">View Details</a>
      </div>
    </div>
  </div>
</section>
{% endif %}


<!-- =======================
     OUR COURSES
======================= -->
<section class="course-list container py-5 fade-section" id="courses">
  <div class="row">
    <div class="col-12 text-center mb-4">
      {% set filtering = request.query_params.get('search') or request.query_params.get('category') or request.query_params.get('age') or request.query_params.get('price_min') or request.query_params.get('price_max') %}
      {% if filtering %}
        <h2 class="text-dark">Available Courses Based on Your Filter</h2>
        {% if courses %}
          <p class="text-secondary">Great to see courses matching your selection. Please pick the one that caught your curiosity.</p>
        {% else %}
          <p class="text-secondary">Sorry, there were no courses matching your selection conditions. Try again using another condition through the filter.</p>
        {% endif %}
      {% else %}
        <h2 class="text-dark">Our Courses</h2>
        <p class="text-secondary">Pick a course that sparks your interest!</p>
      {% endif %}
    </div>
  </div>

  <div class="row mb-4">
    <div class="col-12 mb-2 d-md-none">
      <button class="btn btn-outline-primary w-100" type="button" data-bs-toggle="collapse" data-bs-target="#courseFilter" aria-expanded="false" aria-controls="courseFilter">Filter</button>
    </div>
    <div class="col-md-3 collapse d-md-block" id="courseFilter">
      <p class="small text-muted">Use the filters below to find courses that match your interest.</p>
      <form method="get">
        <input type="text" class="form-control mb-2" name="search" list="course-topics" placeholder="Search by topic..." value="{{ request.query_params.get('search','') }}">
        <datalist id="course-topics">
          <option value="Python">
          <option value="AI">
          <option value="Web Development">
        </datalist>
        <input type="text" class="form-control mb-2" name="category" placeholder="Category" value="{{ request.query_params.get('category','') }}">
        <input type="text" class="form-control mb-2" name="age" placeholder="Age Group" value="{{ request.query_params.get('age','') }}">
        <input type="number" step="0.01" class="form-control mb-2" name="price_max" placeholder="Max Price" value="{{ request.query_params.get('price_max','') }}">
        <button class="btn btn-primary w-100" type="submit">Apply</button>
      </form>
    </div>
    <div class="col-md-9">
      <div class="row g-4">
        {% for course in courses %}
          <div class="col-12 col-md-4 d-flex align-items-stretch mb-4">
            <div class="card h-100 d-flex flex-column shadow course-card">
              {% include 'partials/course_card.html' %}
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</section>

<!-- =======================
     TESTIMONIALS
======================= -->
<section id="testimonials" class="py-5 bg-light fade-section">
  <div class="container">
    <div class="row">
      <div class="col-12 text-center mb-4">
        <h2>What Parents Say</h2>
      </div>
    </div>
    {% if testimonials %}
    <div id="testimonialCarousel" class="carousel slide" data-bs-ride="carousel">
      <div class="carousel-inner">
        {% for t in testimonials %}
        <div class="carousel-item {% if loop.index == 1 %}active{% endif %}">
          <div class="card shadow-sm rounded p-4 text-center">
            <p class="mb-3">“{{ t.content }}”</p>
            <footer class="blockquote-footer">{{ t.name }}</footer>
          </div>
        </div>
        {% endfor %}
      </div>
      <div class="carousel-indicators position-static my-3">
        {% for t in testimonials %}
        <button type="button" data-bs-target="#testimonialCarousel" data-bs-slide-to="{{ loop.index0 }}" {% if loop.index == 1 %}class="active"{% endif %} aria-label="Slide {{ loop.index }}"></button>
        {% endfor %}
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#testimonialCarousel" data-bs-slide="prev">
        <span class="bi bi-arrow-left-circle fs-3" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#testimonialCarousel" data-bs-slide="next">
        <span class="bi bi-arrow-right-circle fs-3" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
    {% else %}
      <p class="text-center">No testimonials yet.</p>
    {% endif %}
    <div class="text-center mt-4">
      <a href="/testimonial" class="btn btn-primary">Share Your Experience</a>
    </div>
  </div>
</section>

<!-- =======================
     CONTACT US
======================= -->
<section id="contact" class="py-5 contact-section fade-section">
  <div class="container">
    <div class="row">
      <div class="col-12 text-center mb-4">
        <h2>Contact Us</h2>
      </div>
      <div class="col-md-6 offset-md-3 text-center">
        <ul class="list-unstyled mb-3">
          <li class="mb-1">
            <i class="bi bi-telephone-fill me-2"></i>
            Call Us:
            <a href="tel:+447733610338" class="contact-link">🇬🇧</a>
            <a href="tel:+2347045598128" class="contact-link">🇳🇬</a>
          </li>
          <li>
            <i class="bi bi-envelope-fill me-2"></i>
            <a href="mailto:techkids@ungozu.com" class="contact-link">techkids@ungozu.com</a>
          </li>
        </ul>
        <div class="mb-3">
          <a href="https://facebook.com/techkids" target="_blank" class="text-white me-3"><i class="bi bi-facebook"></i></a>
          <a href="https://twitter.com/techkids" target="_blank" class="text-white me-3"><i class="bi bi-twitter"></i></a>
          <a href="https://instagram.com/techkids" target="_blank" class="text-white me-3"><i class="bi bi-instagram"></i></a>
          <a href="https://linkedin.com/company/techkids" target="_blank" class="text-white"><i class="bi bi-linkedin"></i></a>
        </div>
        <a href="mailto:techkids@ungozu.com" class="btn btn-light px-4 py-2">Send Us a Message</a>
      </div>
    </div>
  </div>
</section>

{% endblock %}
{% block extra_scripts %}
  {{ super() }}
  {% if filtering %}
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const resultsSection = document.getElementById('courses');
      if (resultsSection) {
        resultsSection.scrollIntoView({ behavior: 'smooth' });
      }
    });
  </script>
  {% endif %}
{% endblock %}
